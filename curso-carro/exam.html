<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CICSA</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="css/font-awesome.css" />
    <link rel="stylesheet" href="css/index.css">
    <style>
    .card p {
        font-weight: 700;
    }
    </style>
</head>
<body>
    <div class="header">
        <div class="header__title">
            <span id="sl-title">Evaluación - Manejo defensivo, seguridad vial y normas de tránsito</span>
        </div>
    </div>
    <div class="container mb-5 mt-5">
            <form action="" id="exam-form">

                <div class="card mb-4">
                    <div class="card-body">
                        <p>1. Son normas que rigen en todo el territorio nacional y regulan la circulación de los peatones, usuarios, pasajeros, conductores,
                            motociclistas, agentes de tránsito y vehículos por las vías públicas o privadas.</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q1" id="a1" value="a1">
                            <label class="form-check-label" for="a1" >
                                A. Código Nacional de Tránsito Terrestre
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q1" id="a2" value="a2">
                            <label class="form-check-label" for="a2">
                                B. Actores viales.
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q1" id="a3" value="a3">
                            <label class="form-check-label" for="a3">
                                C. Actores viales.
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q1" id="a4" value="a4">
                            <label class="form-check-label" for="a4">
                                D. Actores viales.
                            </label>
                        </div>
                    </div>
                </div>


                <div class="card mb-4">
                    <div class="card-body">
                        <p>2. ¿Cuáles son los indicios del micro sueño?</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q2" id="a5" value="a5">
                            <label class="form-check-label" for="a5">
                                A. Cólera, bostezo y condiciones negativas.
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q2" id="a6" value="a6">
                            <label class="form-check-label" for="a6">
                                B. Pestañeos, bostezos, cabeceo y visión borrosa.
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q2" id="a7" value="a7">
                            <label class="form-check-label" for="a7">
                                C. Todas las anteriores.
                            </label>
                            </div>
                            <div class="form-check">
                            <input class="form-check-input" type="radio" name="q2" id="a8" value="a8">
                            <label class="form-check-label" for="a8">
                                D. Agresividad, cabeceo y apetito.
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <p>3. ¿El manejo defensivo es la forma correcta de conducir un vehículo NO respetando las normas de tránsito y transporte?</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q3" id="a9" value="a9">
                            <label class="form-check-label" for="a9">
                                Verdadero
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q3" id="a10" value="a10">
                            <label class="form-check-label" for="a10">
                                Falso
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <p>4. ¿Cuál es el límite de velocidad en zonas escolares y residenciales?</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q4" id="a11" value="a11">
                            <label class="form-check-label" for="a11">
                                A. 50 km/h
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q4" id="a12" value="a12">
                            <label class="form-check-label" for="a12">
                                B. 30 km/h
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q4" id="a13" value="a13">
                            <label class="form-check-label" for="a13">
                                C. 60 km/h
                            </label>
                            </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q4" id="a14" value="a14">
                            <label class="form-check-label" for="a14">
                                D. 80 km/h
                            </label>
                            </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <p>5. Las distracciones desvían la atención de una persona por sus características: </p>
                        <div class="row mb-3">
                            <div class="col-6">Apartar la vista de la panorámica para realizar una acción diferente a la conducción.</div>
                            <div class="col-6">
                                <select name="q51" id="" class="form-select">
                                    <option value="cognitivas">Cognitivas</option>
                                    <option value="fisicas">Físicas</option>
                                    <option value="auditivas">Auditivas</option>
                                    <option value="visual">Visual</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">Atender llamadas o tener la radio con volumen alto. </div>
                            <div class="col-6">
                                <select name="q52" id="" class="form-select">
                                    <option value="visual">Visual</option>
                                    <option value="fisicas">Físicas</option>
                                    <option value="cognitivas">Cognitivas</option>
                                    <option value="auditivas">Auditivas</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">Mantener jornadas largas de conducción sin realizar pausas activas.</div>
                            <div class="col-6">
                                <select name="q53" id="" class="form-select">
                                    <option value="auditivas">Auditivas</option>
                                    <option value="visual">Visual</option>
                                    <option value="cognitivas">Cognitivas</option>
                                    <option value="fisicas">Físicas</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-6">Reflexionar o mantener pensamientos ajenos a la conducción.</div>
                            <div class="col-6">
                                <select name="q54" id="" class="form-select">
                                    <option value="fisicas">Físicas</option>
                                    <option value="visual">Visual</option>
                                    <option value="cognitivas">Cognitivas</option>
                                    <option value="auditivas">Auditivas</option>
                                </select>
                            </div>
                        </div>
                    
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <p>6. ¿Las señales reglamentarias indican a los usuarios, las prohibiciones y las restricciones sobre la vía y NO generan multa si no se obedecen?
                        </p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q6" id="a15" value="a15">
                            <label class="form-check-label" for="a15">
                                Verdadero
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q6" id="a16" value="a16">
                            <label class="form-check-label" for="a16">
                                Falso
                            </label>
                            </div>
                    </div>
                </div>


                <div class="card mb-4">
                    <div class="card-body">
                        <p>7. Las señales reglamentarias tienen por finalidad notificar a los usuarios de las vías las prioridades en el uso de las mismas, así como las limitaciones, prohibiciones, restricciones, obligaciones y autorizaciones existentes.
                            
                        </p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q7" id="a17" value="a17">
                            <label class="form-check-label" for="a17">
                                Verdadero
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q7" id="a18" value="a18">
                            <label class="form-check-label" for="a18">
                                Falso
                            </label>
                            </div>
                    </div>
                </div>


                <div class="card mb-4">
                    <div class="card-body">
                        <p>8. ¿Qué indica la siguiente señal de tránsito?</p>
                        <img src="assets/signal_1.png" alt="">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q8" id="a19" value="a19">
                            <label class="form-check-label" for="a19">
                                A. Trabajadores en la vía.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q8" id="a20" value="a20">
                            <label class="form-check-label" for="a20">
                                B. Inicio de obra.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q8" id="a21" value="a21">
                            <label class="form-check-label" for="a21">
                                C. Banderillero.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q8" id="a22" value="a22">
                            <label class="form-check-label" for="a22">
                                D. Auxiliar de tránsito.
                            </label>
                        </div>
                    </div>
                </div>


                <div class="card mb-4">
                    <div class="card-body">
                        <p>9. ¿Cuáles son los elementos que conforman el manejo defensivo</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q9" id="a23" value="a23">
                            <label class="form-check-label" for="a23">
                                A. Riesgos delantero, lateral y trasero.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q9" id="a24" value="a24">
                            <label class="form-check-label" for="a24">
                                B. Peatón, ciclista, conductor y motociclista.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q9" id="a25" value="a25">
                            <label class="form-check-label" for="a25">
                                C. Factor Humano, Factor Vehículo y Factor Ambiental.
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="q9" id="a26" value="a26">
                            <label class="form-check-label" for="a26">
                                D. Conocimiento, atención, prevención, decisión y habilidad
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <p>10. Para cada enunciado, seleccione la respuesta correcta:</p>
                        <div class="row mb-3">
                            <div class="col-6">Asegúrate de tener visibilidad y no cruzar por tramos inundados.</div>
                            <div class="col-6">
                                <select name="q101" id="" class="form-select">
                                    <option value="visibilidad">ZONA DE POCA VISIBILIDAD</option>
                                    <option value="neblina">ZONA DE NEBLINA</option>
                                    <option value="humedad">ZONA DE HUMEDAD</option>
                                    <option value="rafagas">ZONA DE RAFAGAS</option>
                                    <option value="trafico">ZONA DE ALTO TRÁFICO</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">Realice paradas para descansar y mire continuamente los espejos retrovisores.</div>
                            <div class="col-6">
                                <select name="q102" id="" class="form-select">
                                    <option value="humedad">ZONA DE HUMEDAD</option>
                                    <option value="trafico">ZONA DE ALTO TRÁFICO</option>
                                    <option value="neblina">ZONA DE NEBLINA</option>
                                    <option value="rafagas">ZONA DE RAFAGAS</option>
                                    <option value="visibilidad">ZONA DE POCA VISIBILIDAD</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">Tome las vías alternas antes de un atasco vehicular.</div>
                            <div class="col-6">
                                <select name="q103" id="" class="form-select">
                                    <option value="rafagas">ZONA DE RAFAGAS</option>
                                    <option value="humedad">ZONA DE HUMEDAD</option>
                                    <option value="visibilidad">ZONA DE POCA VISIBILIDAD</option>
                                    <option value="neblina">ZONA DE NEBLINA</option>
                                    <option value="trafico">ZONA DE ALTO TRÁFICO</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-6">Evite utilizar luces altas y modere su velocidad.</div>
                            <div class="col-6">
                                <select name="q104" id="" class="form-select">
                                    <option value="trafico">ZONA DE ALTO TRÁFICO</option>
                                    <option value="humedad">ZONA DE HUMEDAD</option>
                                    <option value="visibilidad">ZONA DE POCA VISIBILIDAD</option>
                                    <option value="rafagas">ZONA DE RAFAGAS</option>
                                    <option value="neblina">ZONA DE NEBLINA</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-6">Este atento a la dirección del viento y reduzca su velocidad.</div>
                            <div class="col-6">
                                <select name="q105" id="" class="form-select">
                                    <option value="neblina">ZONA DE NEBLINA</option>
                                    <option value="humedad">ZONA DE HUMEDAD</option>
                                    <option value="rafagas">ZONA DE RAFAGAS</option>
                                    <option value="visibilidad">ZONA DE POCA VISIBILIDAD</option>
                                    <option value="trafico">ZONA DE ALTO TRÁFICO</option>
                                </select>
                            </div>
                        </div>
                    
                    </div>
                </div>

                <button class="btn btn-primary">Enviar Evaluación</button>

                <div class="alert alert-danger mt-4 visually-hidden" role="alert" id="error-alert"></div>

            </form>
        </div>
    </div>

    <div class="modal" tabindex="-1" id="myModal">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title"></h5>
            </div>
            <div class="modal-body">
            <p></p>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="modal-accept-btn">Aceptar</button>
            </div>
        </div>
        </div>
    </div>

</body>

<script src="js/app.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



<script>

const exam = () => {

    const modal = new bootstrap.Modal('#myModal', {});

    const data = JSON.parse(localStorage.getItem('exam_1_completed')) || {};

    const MAX_ATTEMPTS = 3;

    if (data.maxAttempts && data.maxAttempts === true) {
        alert("Ya ha presentado el examen en la cantidad maxima de intentos permitidos");
        window.location.href = "index.html";
    }

    if (data.passedExam && data.passedExam === true) {
        alert("Ya ha presentado el examen anteriormente");
        window.location.href = "index.html";
    }

    const correctAnswers=[{value:"a1",score:10},{value:"a6",score:10},{value:"a10",score:10},{value:"a12",score:10},{value:"visual",score:2.5},{value:"auditivas",score:2.5},{value:"fisicas",score:2.5},{value:"cognitivas",score:2.5},{value:"a16",score:10},{value:"a17",score:10},{value:"a22",score:10},{value:"a26",score:10},{value:"humedad",score:2},{value:"visibilidad",score:2},{value:"trafico",score:2},{value:"neblina",score:2},{value:"rafagas",score:2}];


    const errorAlert = document.getElementById('error-alert');

    document.getElementById("exam-form").addEventListener('submit', (e) => {
        e.preventDefault();

        errorAlert.classList.add('visually-hidden');

        let result = 0;

        let form = $("#exam-form").serializeArray();

        console.log(form)
        if (form.length !== correctAnswers.length) {
            errorAlert.innerText = "Por favor responda todas las preguntas";
            errorAlert.classList.remove('visually-hidden');
            return;
        }

        for (let i = 0; i < correctAnswers.length; i++) {
            if (correctAnswers[i].value === form[i].value) {
                result+=correctAnswers[i].score;
            }
        }
        
        if (result >= 80) {
            localStorage.setItem('exam_1_completed', JSON.stringify({
                result: result,
                passedExam: true,
                maxAttempts: false
            }));
            loadModal({ title: "Felicitaciones!!", body: "Has pasado el examen tu calificacion es:", result: result});
        } else {
            const data = JSON.parse(localStorage.getItem('exam_1_completed')) || {};
            const numAttempts = data.attempts ? (data.attempts+1) : 1;
            localStorage.setItem('exam_1_completed', JSON.stringify({
                result: result,
                passedExam: false,
                attempts: numAttempts,
                maxAttempts: numAttempts >= MAX_ATTEMPTS
            }));
            loadModal({ title: "Lo sentimos!!", body: "NO has pasado el examen, intenta de nuevo. Tu calificacion es:", result: result});
        }
    });

    document.getElementById("modal-accept-btn").addEventListener("click", () => window.location.href = "index.html");

    function loadModal(data) {
        $('.modal-title').text(data.title);
        $('.modal-body').text(data.body +" "+ data.result);
        modal.show();
    }
}


exam();

</script>
</body>
</html>